!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("three"),require("d3-array"),require("d3-geo"),require("d3-geo-projection")):"function"==typeof define&&define.amd?define(["exports","three","d3-array","d3-geo","d3-geo-projection"],r):r(e.Planck=e.Planck||{},e.THREE,e.d3,e.d3,e.d3)}(this,function(e,p,r,t,n){"use strict";var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e){return function(){var u=e.apply(this,arguments);return new Promise(function(i,a){return function r(e,t){try{var n=u[e](t),o=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});i(o)}("next")})}},d=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},y=function(){function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}}(),h=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},i=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},x=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)};function a(e){var t=Symbol(e);return function(e,r){return null==e[t]&&("function"==typeof r?e[t]=r({}):"object"===(void 0===r?"undefined":m(r))?e[t]=h({},r):e[t]={}),e[t]}}var g=a("Division"),s=function(){function n(e,r){d(this,n);var t=g(this);t.level=e,t.code=r}var r,t,o,i,a,u,s,c,f,l;return y(n,[{key:"properties",value:(l=v(regeneratorRuntime.mark(function e(r){var t,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.level.properties(r);case 2:if(t=e.sent,n=this.code,void 0!==(o=t[n])){e.next=8;break}throw i=this.level.identifier,new Error("Could not find properties for "+i+" "+n);case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"bounds",value:(f=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.bounds);case 3:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"area",value:(c=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.area);case 3:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"centroid",value:(s=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.centroid);case 3:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"poleOfInaccessibility",value:(u=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.poleOfInaccessibility);case 3:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"geometry",value:(a=v(regeneratorRuntime.mark(function e(r,t){var n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.level.geometries(r,t);case 2:if(n=e.sent,o=this.code,void 0!==(i=n[o])){e.next=8;break}throw a=this.level.identifier,new Error("Could not find "+r+" geometry for "+a+" "+o);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{key:"shapeGeometry",value:(i=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.geometry("shapes",r));case 1:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"outlineGeometry",value:(o=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.geometry("outlines",r));case 1:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"borderGeometry",value:(t=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.geometry("borders",r));case 1:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"subdivisionGeometry",value:(r=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.geometry("subdivisions",r));case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"belongsTo",value:function(e){return e.level===this.level.superlevel&&e.code===this.level.coder.super(this.code)}},{key:"code",get:function(){return g(this).code}},{key:"level",get:function(){return g(this).level}},{key:"geography",get:function(){return this.level.geography}},{key:"data",get:function(){var r=this,e=g(this);return void 0===e.data&&(e.data=this.level.data.find(function(e){return e.code===r.code})),e.data}},{key:"name",get:function(){return this.data.name}},{key:"localizedName",get:function(){return this.data.localizedName||this.data.name}},{key:"neighbors",get:function(){var r=this,e=g(this);return void 0===e.neighbors&&(e.neighbors=this.data.neighbors.map(function(e){return r.constructor.for(e)})),[].concat(b(e.neighbors))}},{key:"superdivision",get:function(){var r=this,e=g(this);if(void 0===e.superdivision){var t=this.level.superlevel;e.superdivision=t?t.divisions.find(function(e){return r.belongsTo(e)}):null}return e.superdivision}},{key:"subdivisions",get:function(){var r=this,e=g(this);if(void 0===e.subdivisions){var t=this.level.sublevel;e.subdivisions=t?t.divisions.filter(function(e){return e.belongsTo(r)}):[]}return[].concat(b(e.subdivisions))}}]),n}(),u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(e,r){return e(r={exports:{}},r.exports),r.exports}var f=c(function(e,c){function o(e,r){for(var t=0,n=e.length-1;0<=n;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t--;t)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};function a(e,r){if(e.filter)return e.filter(r);for(var t=[],n=0;n<e.length;n++)r(e[n],n,e)&&t.push(e[n]);return t}c.resolve=function(){for(var e="",r=!1,t=arguments.length-1;-1<=t&&!r;t--){var n=0<=t?arguments[t]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,r="/"===n.charAt(0))}return(r?"/":"")+(e=o(a(e.split("/"),function(e){return!!e}),!r).join("/"))||"."},c.normalize=function(e){var r=c.isAbsolute(e),t="/"===n(e,-1);return(e=o(a(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&t&&(e+="/"),(r?"/":"")+e},c.isAbsolute=function(e){return"/"===e.charAt(0)},c.join=function(){var e=Array.prototype.slice.call(arguments,0);return c.normalize(a(e,function(e,r){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},c.relative=function(e,r){function t(e){for(var r=0;r<e.length&&""===e[r];r++);for(var t=e.length-1;0<=t&&""===e[t];t--);return t<r?[]:e.slice(r,t-r+1)}e=c.resolve(e).substr(1),r=c.resolve(r).substr(1);for(var n=t(e.split("/")),o=t(r.split("/")),i=Math.min(n.length,o.length),a=i,u=0;u<i;u++)if(n[u]!==o[u]){a=u;break}var s=[];for(u=a;u<n.length;u++)s.push("..");return(s=s.concat(o.slice(a))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(e){var r=i(e),t=r[0],n=r[1];return t||n?(n&&(n=n.substr(0,n.length-1)),t+n):"."},c.basename=function(e,r){var t=i(e)[2];return r&&t.substr(-1*r.length)===r&&(t=t.substr(0,t.length-r.length)),t},c.extname=function(e){return i(e)[3]};var n="b"==="ab".substr(-1)?function(e,r,t){return e.substr(r,t)}:function(e,r,t){return r<0&&(r=e.length+r),e.substr(r,t)}}),l=(f.resolve,f.normalize,f.isAbsolute,f.join,f.relative,f.sep,f.delimiter,f.dirname,f.basename,f.extname,function(){try{if(new Function("return this === window")())return!0}catch(e){}return!1}()),w=!l&&function(){try{if(new Function("return this === self")())return!0}catch(e){}return!1}(),j=!l&&!w&&function(){try{if(new Function("return this === global")())return!0}catch(e){}return!1}(),k=l?window:w?self:j?global:void 0,q={isBrowser:l,isWorker:w,isNode:j,scope:k};function A(e){var r=void 0,t=void 0;if("string"==typeof e)r=t=e;else{var n=Object.keys(e);r=e[t=x(n,1)[0]]}if(process.browser)return k[r];if(j)try{return require(t)}catch(e){}}function O(e){try{return A(e)}catch(e){k.process={browser:!j}}return A(e)}function S(e){var r=O(e);if(void 0===r){if(j)throw new Error('Could not resolve module "'+e+'"');return{}}return r}Object.assign(O,{optional:function(e){var r=O(e);return void 0===r?{}:r},required:function(e){var r=O(e);if(void 0===r)throw j?new Error('Could not resolve module "'+e+'"'):new Error('"'+e+'" isn’t defined in the global scope');return r},node:S,browser:function(e){var r=O(e);if(void 0===r){if(!j)throw new Error('"'+e+'" isn’t defined in the global scope');return{}}return r}});var C=S("path"),E=j?C:h({},f,{resolve:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return f.resolve.apply(f,["/"].concat(r))}}),R={resolve:E.resolve,normalize:E.normalize,join:E.join,relative:E.relative,dirname:E.dirname,basename:E.basename,extname:E.extname,delimiter:E.delimiter,sep:E.sep},T={},_={},G=34,M=10,P=13;function z(e){return new Function("d","return {"+e.map(function(e,r){return JSON.stringify(e)+": d["+r+"]"}).join(",")+"}")}function N(i){var r=new RegExp('["'+i+"\n\r]"),l=i.charCodeAt(0);function t(n,e){var r,t=[],o=n.length,i=0,a=0,u=o<=0,s=!1;function c(){if(u)return _;if(s)return s=!1,T;var e,r,t=i;if(n.charCodeAt(t)===G){for(;i++<o&&n.charCodeAt(i)!==G||n.charCodeAt(++i)===G;);return(e=i)>=o?u=!0:(r=n.charCodeAt(i++))===M?s=!0:r===P&&(s=!0,n.charCodeAt(i)===M&&++i),n.slice(t+1,e-1).replace(/""/g,'"')}for(;i<o;){if((r=n.charCodeAt(e=i++))===M)s=!0;else if(r===P)s=!0,n.charCodeAt(i)===M&&++i;else if(r!==l)continue;return n.slice(t,e)}return u=!0,n.slice(t,o)}for(n.charCodeAt(o-1)===M&&--o,n.charCodeAt(o-1)===P&&--o;(r=c())!==_;){for(var f=[];r!==T&&r!==_;)f.push(r),r=c();e&&null==(f=e(f,a++))||t.push(f)}return t}function n(e){return e.map(a).join(i)}function a(e){return null==e?"":r.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,i){var a,u,r=t(e,function(e,r){if(a)return a(e,r-1);var t,n,o;u=e,a=i?(n=i,o=z(t=e),function(e,r){return n(o(e),r,t)}):z(e)});return r.columns=u||[],r},parseRows:t,format:function(e,t){var r,n,o;return null==t&&(r=e,n=Object.create(null),o=[],r.forEach(function(e){for(var r in e)r in n||o.push(n[r]=r)}),t=o),[t.map(a).join(i)].concat(e.map(function(r){return t.map(function(e){return a(r[e])}).join(i)})).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}}var B=N(",").parse,Z=N("\t").parse,I=function(e,r){if(r=r.split(":")[0],!(e=+e))return!1;switch(r){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},U=Object.freeze({default:I,__moduleExports:I}),F=Object.prototype.hasOwnProperty;function J(e){return decodeURIComponent(e.replace(/\+/g," "))}var L=function(e,r){r=r||"";var t=[];for(var n in"string"!=typeof r&&(r="?"),e)F.call(e,n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?r+t.join("&"):""},D=function(e){for(var r,t=/([^=?&]+)=?([^&]*)/g,n={};r=t.exec(e);n[J(r[1])]=J(r[2]));return n},H={stringify:L,parse:D},V=Object.freeze({default:H,__moduleExports:H,stringify:L,parse:D}),Q=U&&I||U,W=V&&H||V,Y=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,$=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,X=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],K={hash:1,query:1};function ee(e){var r,t={},n=void 0===(e=e||u.location||{})?"undefined":m(e);if("blob:"===e.protocol)t=new te(unescape(e.pathname),{});else if("string"===n)for(r in t=new te(e,{}),K)delete t[r];else if("object"===n){for(r in e)r in K||(t[r]=e[r]);void 0===t.slashes&&(t.slashes=$.test(e.href))}return t}function re(e){var r=Y.exec(e);return{protocol:r[1]?r[1].toLowerCase():"",slashes:!!r[2],rest:r[3]}}function te(e,r,t){if(!(this instanceof te))return new te(e,r,t);var n,o,i,a,u,s,c=X.slice(),f=void 0===r?"undefined":m(r),l=this,h=0;for("object"!==f&&"string"!==f&&(t=r,r=null),t&&"function"!=typeof t&&(t=W.parse),r=ee(r),n=!(o=re(e||"")).protocol&&!o.slashes,l.slashes=o.slashes||n&&r.slashes,l.protocol=o.protocol||r.protocol||"",e=o.rest,o.slashes||(c[2]=[/(.*)/,"pathname"]);h<c.length;h++)i=(a=c[h])[0],s=a[1],i!=i?l[s]=e:"string"==typeof i?~(u=e.indexOf(i))&&("number"==typeof a[2]?(l[s]=e.slice(0,u),e=e.slice(u+a[2])):(l[s]=e.slice(u),e=e.slice(0,u))):(u=i.exec(e))&&(l[s]=u[1],e=e.slice(0,u.index)),l[s]=l[s]||n&&a[3]&&r[s]||"",a[4]&&(l[s]=l[s].toLowerCase());t&&(l.query=t(l.query)),n&&r.slashes&&"/"!==l.pathname.charAt(0)&&(""!==l.pathname||""!==r.pathname)&&(l.pathname=function(e,r){for(var t=(r||"/").split("/").slice(0,-1).concat(e.split("/")),n=t.length,o=t[n-1],i=!1,a=0;n--;)"."===t[n]?t.splice(n,1):".."===t[n]?(t.splice(n,1),a++):a&&(0===n&&(i=!0),t.splice(n,1),a--);return i&&t.unshift(""),"."!==o&&".."!==o||t.push(""),t.join("/")}(l.pathname,r.pathname)),Q(l.port,l.protocol)||(l.host=l.hostname,l.port=""),l.username=l.password="",l.auth&&(a=l.auth.split(":"),l.username=a[0]||"",l.password=a[1]||""),l.origin=l.protocol&&l.host&&"file:"!==l.protocol?l.protocol+"//"+l.host:"null",l.href=l.toString()}te.prototype={set:function(e,r,t){var n=this;switch(e){case"query":"string"==typeof r&&r.length&&(r=(t||W.parse)(r)),n[e]=r;break;case"port":n[e]=r,Q(r,n.protocol)?r&&(n.host=n.hostname+":"+r):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=r,n.port&&(r+=":"+n.port),n.host=r;break;case"host":n[e]=r,/:\d+$/.test(r)?(r=r.split(":"),n.port=r.pop(),n.hostname=r.join(":")):(n.hostname=r,n.port="");break;case"protocol":n.protocol=r.toLowerCase(),n.slashes=!t;break;case"pathname":case"hash":if(r){var o="pathname"===e?"/":"#";n[e]=r.charAt(0)!==o?o+r:r}else n[e]=r;break;default:n[e]=r}for(var i=0;i<X.length;i++){var a=X[i];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=W.stringify);var r,t=this,n=t.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(t.slashes?"//":"");return t.username&&(o+=t.username,t.password&&(o+=":"+t.password),o+="@"),o+=t.host+t.pathname,(r="object"===m(t.query)?e(t.query):t.query)&&(o+="?"!==r.charAt(0)?"?"+r:r),t.hash&&(o+=t.hash),o}},te.extractProtocol=re,te.location=ee,te.qs=W;var ne=te,oe=S("fs").readFile,ie=S("request");function ae(e,r){if(j){var t=function(e,r){var n=void 0,o=void 0,t=new Promise(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];n=r[0],o=r[1]});if(r.local)oe(e,r.encoding,function(e,r){e?o(e):n(r)}),t.abort=function(){};else{var i=ie({url:e,headers:r.headers||{},qs:r.query||{},encoding:r.encoding},function(e,r){e?o(e):((r.statusCode<200||300<=r.statusCode)&&o(r.statusCode),n(r.body))});i.on("abort",function(){o(0)}),t.abort=function(){i.abort()}}return t}(e,r);if("json"===r.type){var n=t.then(function(e){if("string"!=typeof e)throw new Error("Response is unexpectedly not a string");return JSON.parse(e)});return n.abort=function(){t.abort()},n}if("arraybuffer"===r.type){var o=t.then(function(e){if(!(e instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var r=new ArrayBuffer(e.length),t=new Uint8Array(r),n=0;n<e.length;++n)t[n]=e[n];return r});return o.abort=function(){t.abort()},o}return t}return function(e,r){var n=void 0,o=void 0,t=new Promise(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];n=r[0],o=r[1]}),i=new ne(e,!0);r.query&&i.set("query",Object.assign({},i.query,r.query));var a=new XMLHttpRequest;if(a.open("get",i.toString(),!0),r.headers)for(var u=Object.keys(r.headers),s=0;s<u.length;++s){var c=u[s];a.setRequestHeader(c,r.headers[c])}return a.responseType=r.type,a.addEventListener("loadend",function(e){a.status<200||300<=a.status?o(a.status):null!=a.response||"json"!==r.type?n(a.response):o(new Error("Could not parse JSON"))},!1),a.send(),t.abort=function(){a.abort()},t}(e,r)}function ue(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=r[0],o=r[1];"string"!=typeof n&&(n=(o=n).url);if("string"!=typeof n)throw new Error("The first argument or options.url must be a string");return[n,o=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},o)]}function se(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=e.toJSON(),n=t.data||{},o=[],i=r;if(n.index){var a=e.index.array,u=a.buffer;o.push([u,i]),n.index.array=[i,a.length],i+=u.byteLength}if(n.attributes)for(var s=Object.keys(n.attributes),c=0;c<s.length;++c){var f=s[c],l=e.attributes[f].array,h=l.buffer;o.push([h,i]),n.attributes[f].array=[i,l.length],i+=h.byteLength}return t.data=n,[t,o,i]}function ce(e,r){var t=h({},e,{data:h({},e.data)});if(t.data.index){var n=t.data.index.type,o=new(Function.prototype.bind.apply(q.scope[n],[null].concat([r],b(t.data.index.array))));t.data.index=h({},t.data.index,{array:o})}if(t.data.attributes){for(var i={},a=Object.keys(t.data.attributes),u=0;u<a.length;++u){var s=a[u],c=t.data.attributes[s],f=c.type,l=new(Function.prototype.bind.apply(q.scope[f],[null].concat([r],b(c.array))));i[s]=h({},c,{array:l})}t.data.attributes=i}return(new p.BufferGeometryLoader).parse(t)}function fe(e,r){for(var t=new ArrayBuffer(r),n=new Uint8Array(t),o=0;o<e.length;++o){var i=x(e[o],2),a=i[0],u=i[1];n.set(new Uint8Array(a),u)}return t}Object.assign(ae,{text:function(){var e=ue.apply(void 0,arguments),r=x(e,2),t=r[0],n=r[1];return n.type="text",ae(t,n)},json:function(){var e=ue.apply(void 0,arguments),r=x(e,2),t=r[0],n=r[1];return n.type="json",ae(t,n)},buffer:function(){var e=ue.apply(void 0,arguments),r=x(e,2),t=r[0],n=r[1];return n.type="arraybuffer",n.encoding=null,ae(t,n)},csv:function(){var e=ue.apply(void 0,arguments),r=x(e,2),t=r[0],n=r[1],o=this.text(t,n),i=o.then(function(e){return B(e,n.row)});return i.abort=function(){o.abort()},i},tsv:function(){var e=ue.apply(void 0,arguments),r=x(e,2),t=r[0],n=r[1],o=this.text(t,n),i=o.then(function(e){return Z(e,n.row)});return i.abort=function(){o.abort()},i}});var le={packBufferGeometry:function(e){var r=se(e),t=x(r,3);return[t[0],fe(t[1],t[2])]},packBufferGeometries:function(e){var r=function(e){if(Array.isArray(e)){for(var r=[],t=[],n=0,o=0;o<e.length;++o){var i=se(e[o],n),a=x(i,3),u=a[0],s=a[1],c=a[2];r.push(u),t.push.apply(t,b(s)),n=c}return[r,t,n]}for(var f={},l=[],h=0,p=Object.keys(e),v=0;v<p.length;++v){var d=p[v],y=se(e[d],h),g=x(y,3);u=g[0],s=g[1],c=g[2],f[d]=u,l.push.apply(l,b(s)),h=c}return[f,l,h]}(e),t=x(r,3);return[t[0],fe(t[1],t[2])]},unpackBufferGeometry:function(e,r){return ce(e,r)},unpackBufferGeometries:function(e,r){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;++n)t.push(ce(e,r));return t}for(var o={},i=Object.keys(e),a=0;a<i.length;++a){var u=i[a];o[u]=ce(e[u],r)}return o}},he=a("DivisionLevel"),pe=function(){function n(e,r){d(this,n);var t=he(this);t.identifier=e,t.coder=r,t.divisions={},t.properties={},t.geometries={}}var t,o,r;return y(n,[{key:"init",value:function(e){he(this).geography=e}},{key:"division",value:function(e){var r=he(this),t=r.divisions[e];return void 0===t&&(t=new s(this,e),r.divisions[e]=t),t}},{key:"properties",value:(r=v(regeneratorRuntime.mark(function e(r){var t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=he(this),n=r?r.hash:null,void 0===t.properties[n]&&(o=R.join(R.dirname(this.geography.path),n||"",this.geography.identifier,this.identifier,"properties.json"),t.properties[n]=ae.json(o,{local:!0})),e.abrupt("return",t.properties[n]);case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"geometries",value:(o=v(regeneratorRuntime.mark(function e(r,t){var n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=he(this),o=t?t.hash:null,void 0===(i=n.geometries[o])&&(i={},n.geometries[o]=i),void 0===i[r]&&(i[r]=this.requestGeometries(r,t)),e.abrupt("return",i[r]);case 6:case"end":return e.stop()}},e,this)})),function(e,r){return o.apply(this,arguments)})},{key:"requestGeometries",value:(t=v(regeneratorRuntime.mark(function e(r,t){var n,o,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=R.join(R.dirname(this.geography.path),t.hash,this.geography.identifier,this.identifier,r),i=o=void 0,e.prev=3,e.next=6,Promise.all([ae.json(n+".json"),ae.buffer(n+".buffer")]);case 6:a=e.sent,u=x(a,2),o=u[0],i=u[1],e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0;case 15:return e.abrupt("return",le.unpackBufferGeometries(o,i));case 16:case"end":return e.stop()}},e,this,[[3,12]])})),function(e,r){return t.apply(this,arguments)})},{key:"identifier",get:function(){return he(this).identifier}},{key:"coder",get:function(){return he(this).coder}},{key:"geography",get:function(){return he(this).geography}},{key:"data",get:function(){var e=he(this);return void 0===e.data&&(e.data=this.geography.data[this.identifier]),e.data}},{key:"divisions",get:function(){var a=this,u=he(this);return u.divisions=h({},u.divisions,this.data.reduce(function(e,r){var t,n,o,i=r.code;return void 0===u.divisions[i]?h({},e,(t={},o=new s(a,n=i),n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)):e},{})),Object.values(u.divisions)}},{key:"codes",get:function(){var e=he(this);return void 0===e.codes&&(e.codes=this.data.map(function(e){return e.code})),[].concat(b(e.codes))}},{key:"superlevel",get:function(){var e=he(this);if(void 0===e.superlevel){var r=this.geography.levels,t=r.indexOf(this);if(-1===t)throw new Error("Could not find levels for geography");e.superlevel=r[t-1]||null}return e.superlevel}},{key:"sublevel",get:function(){var e=he(this);if(void 0===e.sublevel){var r=this.geography.levels,t=r.indexOf(this);if(-1===t)throw new Error("Could not find levels for geography");e.sublevel=r[t+1]||null}return e.sublevel}}]),n}(),ve=a("Geography"),de=function(){function n(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];d(this,n);var t=ve(this);t.identifier=e,t.levels=r,t.properties={},t.geometries={}}var r,t,o,i,a,u,s,c,f,l,h;return y(n,[{key:"init",value:(h=v(regeneratorRuntime.mark(function e(r,t){var n,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=ve(this)).path=r,!t){e.next=8;break}return e.next=5,Promise.resolve(t);case 5:n.data=e.sent,e.next=11;break;case 8:return e.next=10,ae.json(r,{local:!0});case 10:n.data=e.sent;case 11:return e.next=13,Promise.all(this.levels.map(function(e){return e.init(o)}));case 13:case"end":return e.stop()}},e,this)})),function(e,r){return h.apply(this,arguments)})},{key:"division",value:function(r,e){var t=this.levels.find(function(e){return e.identifier===r});if(void 0===t)throw new Error("Could not find "+r+" level in geography");return t.division(e)}},{key:"divisions",value:function(r){var e=this.levels.find(function(e){return e.identifier===r});if(void 0===e)throw new Error("Could not find "+r+" level in geography");return e.divisions}},{key:"codes",value:function(r){var e=this.levels.find(function(e){return e.identifier===r});if(void 0===e)throw new Error("Could not find "+r+" level in geography");return e.codes}},{key:"properties",value:(l=v(regeneratorRuntime.mark(function e(r){var t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=ve(this),n=r?r.hash:null,void 0===t.properties[n]&&(o=R.join(R.dirname(this.path),n||"",this.identifier,"properties.json"),t.properties[n]=ae.json(o,{local:!0})),e.abrupt("return",t.properties[n]);case 4:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"bounds",value:(f=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.bounds);case 3:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"area",value:(c=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.area);case 3:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"centroid",value:(s=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.centroid);case 3:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"poleOfInaccessibility",value:(u=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.properties(r);case 2:return e.abrupt("return",e.sent.poleOfInaccessibility);case 3:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"geometry",value:(a=v(regeneratorRuntime.mark(function e(r,t){var n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ve(this),o=t?t.hash:null,void 0===(i=n.geometries[o])&&(i={},n.geometries[o]=i),void 0===i[r]&&(i[r]=this.requestGeometry(r,t)),e.abrupt("return",i[r]);case 6:case"end":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{key:"requestGeometry",value:(i=v(regeneratorRuntime.mark(function e(r,t){var n,o,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=R.join(R.dirname(this.path),t.hash,this.identifier,r),i=o=void 0,e.prev=3,e.next=6,Promise.all([ae.json(n+".json"),ae.buffer(n+".buffer")]);case 6:a=e.sent,u=x(a,2),o=u[0],i=u[1],e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0;case 15:return e.abrupt("return",le.unpackBufferGeometry(o,i));case 16:case"end":return e.stop()}},e,this,[[3,12]])})),function(e,r){return i.apply(this,arguments)})},{key:"shapeGeometry",value:(o=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.geometry("shape",r));case 1:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"outlineGeometry",value:(t=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.geometry("outline",r));case 1:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"subdivisionGeometry",value:(r=v(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.geometry("subdivision",r));case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"identifier",get:function(){return ve(this).identifier}},{key:"levels",get:function(){var e=ve(this);return[].concat(b(e.levels))}},{key:"path",get:function(){return ve(this).path}},{key:"data",get:function(){var e=ve(this);if(!e.data)throw new Error("Data is missing for "+this.identifier);return e.data}}]),n}(),ye=me,ge=me;function me(e,r,t){t=t||2;var n,o,i,a,u,s,c,f=r&&r.length,l=f?r[0]*t:e.length,h=xe(e,0,l,t,!0),p=[];if(!h)return p;if(f&&(h=function(e,r,t,n){var o,i,a,u,s,c=[];for(o=0,i=r.length;o<i;o++)a=r[o]*n,u=o<i-1?r[o+1]*n:e.length,(s=xe(e,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(Ee(s));for(c.sort(Oe),o=0;o<c.length;o++)Se(c[o],t),t=be(t,t.next);return t}(e,r,h,t)),e.length>80*t){n=i=e[0],o=a=e[1];for(var v=t;v<l;v+=t)(u=e[v])<n&&(n=u),(s=e[v+1])<o&&(o=s),i<u&&(i=u),a<s&&(a=s);c=0!==(c=Math.max(i-n,a-o))?1/c:0}return we(h,p,t,n,o,c),p}function xe(e,r,t,n,o){var i,a;if(o===0<Ze(e,r,t,n))for(i=r;i<t;i+=n)a=ze(i,e[i],e[i+1],a);else for(i=t-n;r<=i;i-=n)a=ze(i,e[i],e[i+1],a);return a&&_e(a,a.next)&&(Ne(a),a=a.next),a}function be(e,r){if(!e)return e;r||(r=e);var t,n=e;do{if(t=!1,n.steiner||!_e(n,n.next)&&0!==Te(n.prev,n,n.next))n=n.next;else{if(Ne(n),(n=r=n.prev)===n.next)break;t=!0}}while(t||n!==r);return r}function we(e,r,t,n,o,i,a){if(e){!a&&i&&function(e,r,t,n){var o=e;for(;null===o.z&&(o.z=Ce(o.x,o.y,r,t,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next,o!==e;);o.prevZ.nextZ=null,o.prevZ=null,function(e){var r,t,n,o,i,a,u,s,c=1;do{for(t=e,i=e=null,a=0;t;){for(a++,n=t,r=u=0;r<c&&(u++,n=n.nextZ);r++);for(s=c;0<u||0<s&&n;)0!==u&&(0===s||!n||t.z<=n.z)?(t=(o=t).nextZ,u--):(n=(o=n).nextZ,s--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;t=n}i.nextZ=null,c*=2}while(1<a)}(o)}(e,n,o,i);for(var u,s,c=e;e.prev!==e.next;)if(u=e.prev,s=e.next,i?ke(e,n,o,i):je(e))r.push(u.i/t),r.push(e.i/t),r.push(s.i/t),Ne(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?we(e=qe(e,r,t),r,t,n,o,i,2):2===a&&Ae(e,r,t,n,o,i):we(be(e),r,t,n,o,i,1);break}}}function je(e){var r=e.prev,t=e,n=e.next;if(0<=Te(r,t,n))return!1;for(var o=e.next.next;o!==e.prev;){if(Re(r.x,r.y,t.x,t.y,n.x,n.y,o.x,o.y)&&0<=Te(o.prev,o,o.next))return!1;o=o.next}return!0}function ke(e,r,t,n){var o=e.prev,i=e,a=e.next;if(0<=Te(o,i,a))return!1;for(var u=o.x<i.x?o.x<a.x?o.x:a.x:i.x<a.x?i.x:a.x,s=o.y<i.y?o.y<a.y?o.y:a.y:i.y<a.y?i.y:a.y,c=o.x>i.x?o.x>a.x?o.x:a.x:i.x>a.x?i.x:a.x,f=o.y>i.y?o.y>a.y?o.y:a.y:i.y>a.y?i.y:a.y,l=Ce(u,s,r,t,n),h=Ce(c,f,r,t,n),p=e.prevZ,v=e.nextZ;p&&p.z>=l&&v&&v.z<=h;){if(p!==e.prev&&p!==e.next&&Re(o.x,o.y,i.x,i.y,a.x,a.y,p.x,p.y)&&0<=Te(p.prev,p,p.next))return!1;if(p=p.prevZ,v!==e.prev&&v!==e.next&&Re(o.x,o.y,i.x,i.y,a.x,a.y,v.x,v.y)&&0<=Te(v.prev,v,v.next))return!1;v=v.nextZ}for(;p&&p.z>=l;){if(p!==e.prev&&p!==e.next&&Re(o.x,o.y,i.x,i.y,a.x,a.y,p.x,p.y)&&0<=Te(p.prev,p,p.next))return!1;p=p.prevZ}for(;v&&v.z<=h;){if(v!==e.prev&&v!==e.next&&Re(o.x,o.y,i.x,i.y,a.x,a.y,v.x,v.y)&&0<=Te(v.prev,v,v.next))return!1;v=v.nextZ}return!0}function qe(e,r,t){var n=e;do{var o=n.prev,i=n.next.next;!_e(o,i)&&Ge(o,n,n.next,i)&&Me(o,i)&&Me(i,o)&&(r.push(o.i/t),r.push(n.i/t),r.push(i.i/t),Ne(n),Ne(n.next),n=e=i),n=n.next}while(n!==e);return n}function Ae(e,r,t,n,o,i){var a,u,s=e;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&(u=c,(a=s).next.i!==u.i&&a.prev.i!==u.i&&!function(e,r){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==r.i&&t.next.i!==r.i&&Ge(t,t.next,e,r))return!0;t=t.next}while(t!==e);return!1}(a,u)&&Me(a,u)&&Me(u,a)&&function(e,r){var t=e,n=!1,o=(e.x+r.x)/2,i=(e.y+r.y)/2;for(;t.y>i!=t.next.y>i&&t.next.y!==t.y&&o<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next,t!==e;);return n}(a,u))){var f=Pe(s,c);return s=be(s,s.next),f=be(f,f.next),we(s,r,t,n,o,i),void we(f,r,t,n,o,i)}c=c.next}s=s.next}while(s!==e)}function Oe(e,r){return e.x-r.x}function Se(e,r){if(r=function(e,r){var t,n=r,o=e.x,i=e.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&a<u){if((a=u)===o){if(i===n.y)return n;if(i===n.next.y)return n.next}t=n.x<n.next.x?n:n.next}}n=n.next}while(n!==r);if(!t)return null;if(o===a)return t.prev;var s,c=t,f=t.x,l=t.y,h=1/0;n=t.next;for(;n!==c;)o>=n.x&&n.x>=f&&o!==n.x&&Re(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&((s=Math.abs(i-n.y)/(o-n.x))<h||s===h&&n.x>t.x)&&Me(n,e)&&(t=n,h=s),n=n.next;return t}(e,r)){var t=Pe(r,e);be(t,t.next)}}function Ce(e,r,t,n,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-n)*o)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Ee(e){for(var r=e,t=e;r.x<t.x&&(t=r),(r=r.next)!==e;);return t}function Re(e,r,t,n,o,i,a,u){return 0<=(o-a)*(r-u)-(e-a)*(i-u)&&0<=(e-a)*(n-u)-(t-a)*(r-u)&&0<=(t-a)*(i-u)-(o-a)*(n-u)}function Te(e,r,t){return(r.y-e.y)*(t.x-r.x)-(r.x-e.x)*(t.y-r.y)}function _e(e,r){return e.x===r.x&&e.y===r.y}function Ge(e,r,t,n){return!!(_e(e,r)&&_e(t,n)||_e(e,n)&&_e(t,r))||0<Te(e,r,t)!=0<Te(e,r,n)&&0<Te(t,n,e)!=0<Te(t,n,r)}function Me(e,r){return Te(e.prev,e,e.next)<0?0<=Te(e,r,e.next)&&0<=Te(e,e.prev,r):Te(e,r,e.prev)<0||Te(e,e.next,r)<0}function Pe(e,r){var t=new Be(e.i,e.x,e.y),n=new Be(r.i,r.x,r.y),o=e.next,i=r.prev;return(e.next=r).prev=e,(t.next=o).prev=t,(n.next=t).prev=n,(i.next=n).prev=i,n}function ze(e,r,t,n){var o=new Be(e,r,t);return n?(o.next=n.next,(o.prev=n).next.prev=o,n.next=o):(o.prev=o).next=o,o}function Ne(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Be(e,r,t){this.i=e,this.x=r,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ze(e,r,t,n){for(var o=0,i=r,a=t-n;i<t;i+=n)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}me.deviation=function(e,r,t,n){var o=r&&r.length,i=o?r[0]*t:e.length,a=Math.abs(Ze(e,0,i,t));if(o)for(var u=0,s=r.length;u<s;u++){var c=r[u]*t,f=u<s-1?r[u+1]*t:e.length;a-=Math.abs(Ze(e,c,f,t))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*t,p=n[u+1]*t,v=n[u+2]*t;l+=Math.abs((e[h]-e[v])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[v+1]-e[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},me.flatten=function(e){for(var r=e[0][0].length,t={vertices:[],holes:[],dimensions:r},n=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<r;a++)t.vertices.push(e[o][i][a]);0<o&&(n+=e[o-1].length,t.holes.push(n))}return t},ye.default=ge;var Ie=Ue;function Ue(e,r){if(!(this instanceof Ue))return new Ue(e,r);if(this.data=e||[],this.length=this.data.length,this.compare=r||Fe,0<this.length)for(var t=this.length>>1;0<=t;t--)this._down(t)}function Fe(e,r){return e<r?-1:r<e?1:0}Ue.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var r=this.data,t=this.compare,n=r[e];0<e;){var o=e-1>>1,i=r[o];if(0<=t(n,i))break;r[e]=i,e=o}r[e]=n},_down:function(e){for(var r=this.data,t=this.compare,n=this.length,o=n>>1,i=r[e];e<o;){var a=1+(e<<1),u=a+1,s=r[a];if(u<n&&t(r[u],s)<0&&(s=r[a=u]),0<=t(s,i))break;r[e]=s,e=a}r[e]=i}};var Je=Object.freeze({default:Ie,__moduleExports:Ie}),Le=Je&&Ie||Je,De=Ve,He=Ve;function Ve(e,r,t){var n,o,i,a;r=r||1;for(var u=0;u<e[0].length;u++){var s=e[0][u];(!u||s[0]<n)&&(n=s[0]),(!u||s[1]<o)&&(o=s[1]),(!u||s[0]>i)&&(i=s[0]),(!u||s[1]>a)&&(a=s[1])}var c=i-n,f=a-o,l=Math.min(c,f),h=l/2,p=new Le(null,Qe);if(0===l)return[n,o];for(var v=n;v<i;v+=l)for(var d=o;d<a;d+=l)p.push(new We(v+h,d+h,h,e));var y=function(e){for(var r=0,t=0,n=0,o=e[0],i=0,a=o.length,u=a-1;i<a;u=i++){var s=o[i],c=o[u],f=s[0]*c[1]-c[0]*s[1];t+=(s[0]+c[0])*f,n+=(s[1]+c[1])*f,r+=3*f}return 0===r?new We(o[0][0],o[0][1],0,e):new We(t/r,n/r,0,e)}(e),g=new We(n+c/2,o+f/2,0,e);g.d>y.d&&(y=g);for(var m=p.length;p.length;){var x=p.pop();x.d>y.d&&(y=x,t&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,m)),x.max-y.d<=r||(h=x.h/2,p.push(new We(x.x-h,x.y-h,h,e)),p.push(new We(x.x+h,x.y-h,h,e)),p.push(new We(x.x-h,x.y+h,h,e)),p.push(new We(x.x+h,x.y+h,h,e)),m+=4)}return t&&(console.log("num probes: "+m),console.log("best distance: "+y.d)),[y.x,y.y]}function Qe(e,r){return r.max-e.max}function We(e,r,t,n){this.x=e,this.y=r,this.h=t,this.d=function(e,r,t){for(var n=!1,o=1/0,i=0;i<t.length;i++)for(var a=t[i],u=0,s=a.length,c=s-1;u<s;c=u++){var f=a[u],l=a[c];f[1]>r!=l[1]>r&&e<(l[0]-f[0])*(r-f[1])/(l[1]-f[1])+f[0]&&(n=!n),o=Math.min(o,Ye(e,r,f,l))}return(n?1:-1)*Math.sqrt(o)}(e,r,n),this.max=this.d+this.h*Math.SQRT2}function Ye(e,r,t,n){var o=t[0],i=t[1],a=n[0]-o,u=n[1]-i;if(0!==a||0!==u){var s=((e-o)*a+(r-i)*u)/(a*a+u*u);1<s?(o=n[0],i=n[1]):0<s&&(o+=a*s,i+=u*s)}return(a=e-o)*a+(u=r-i)*u}De.default=He;var $e={min:function(e,r){var t=void 0,n=Number.POSITIVE_INFINITY;if("function"!=typeof r){for(var o=0;o<e.length;++o){var i=e[o];i<n&&(n=t=i)}return t}for(var a=0;a<e.length;++a){var u=e[a],s=r(u,a);s<n&&(t=u,n=s)}return t},max:function(e,r){var t=void 0,n=Number.NEGATIVE_INFINITY;if("function"!=typeof r){for(var o=0;o<e.length;++o){var i=e[o];n<i&&(n=t=i)}return t}for(var a=0;a<e.length;++a){var u=e[a],s=r(u,a);n<s&&(t=u,n=s)}return t}};function Xe(e,r,t,n){this.message=e,this.expected=r,this.found=t,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Xe)}!function(e,r){function t(){this.constructor=e}t.prototype=r.prototype,e.prototype=new t}(Xe,Error),Xe.buildMessage=function(e,r){var t,i={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var r,t="";for(r=0;r<e.parts.length;r++)t+=e.parts[r]instanceof Array?a(e.parts[r][0])+"-"+a(e.parts[r][1]):a(e.parts[r]);return"["+(e.inverted?"^":"")+t+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}return"Expected "+function(e){var r,t,n,o=new Array(e.length);for(r=0;r<e.length;r++)o[r]=(n=e[r],i[n.type](n));if(o.sort(),0<o.length){for(t=r=1;r<o.length;r++)o[r-1]!==o[r]&&(o[t]=o[r],t++);o.length=t}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+((t=r)?'"'+o(t)+'"':"end of input")+" found."};var Ke={SyntaxError:Xe,parse:function(u,e){e=void 0!==e?e:{};var r,l={},t={svg_path:ve},n=ve,i=function(e){if(!e)return[];for(var r=[],t=0;t<e.length;t++)r=r.concat.apply(r,e[t]);var n=r[0];return n&&"m"==n.code&&(delete n.relative,n.code="M"),r},a=function(e,r){return function(e,r){if(!r)return[e];for(var t=[e],n=0,o=r.length;n<o;n++)t[n+1]=r[n][1];return t}(e,r)},s=/^[Mm]/,c=fe(["M","m"],!1,!1),f=function(e,r,t){var n=Ze(e,[r]);return t&&(n=n.concat(Ze("M"==e?"L":"l",t[1]))),n},o=/^[Zz]/,h=fe(["Z","z"],!1,!1),p=function(){return Ze("Z")},v=/^[Ll]/,d=fe(["L","l"],!1,!1),y=function(e,r){return Ze(e,r)},g=/^[Hh]/,m=fe(["H","h"],!1,!1),x=function(e,r){return Ze(e,r.map(function(e){return{x:e}}))},b=/^[Vv]/,w=fe(["V","v"],!1,!1),j=function(e,r){return Ze(e,r.map(function(e){return{y:e}}))},k=/^[Cc]/,q=fe(["C","c"],!1,!1),A=function(e,r,t){return{x1:e.x,y1:e.y,x2:r.x,y2:r.y,x:t.x,y:t.y}},O=/^[Ss]/,S=fe(["S","s"],!1,!1),C=function(e,r){return{x2:e.x,y2:e.y,x:r.x,y:r.y}},E=/^[Qq]/,R=fe(["Q","q"],!1,!1),T=function(e,r){return{x1:e.x,y1:e.y,x:r.x,y:r.y}},_=/^[Tt]/,G=fe(["T","t"],!1,!1),M=/^[Aa]/,P=fe(["A","a"],!1,!1),z=function(e,r,t,n,o,i){return{rx:e,ry:r,xAxisRotation:t,largeArc:n,sweep:o,x:i.x,y:i.y}},N=function(e,r){return{x:e,y:r}},B=function(e){return 1*e},Z=function(e){return 1*e.join("")},I=/^[01]/,U=fe(["0","1"],!1,!1),F=function(e){return"1"==e},J=function(){return""},L=",",D=ce(",",!1),H=function(e){return e.join("")},V=".",Q=ce(".",!1),W=/^[eE]/,Y=fe(["e","E"],!1,!1),$=/^[+\-]/,X=fe(["+","-"],!1,!1),K=/^[0-9]/,ee=fe([["0","9"]],!1,!1),re=function(e){return e.join("")},te=/^[ \t\n\r]/,ne=fe([" ","\t","\n","\r"],!1,!1),oe=0,ie=[{line:1,column:1}],ae=0,ue=[],se=0;if("startRule"in e){if(!(e.startRule in t))throw new Error("Can't start parsing from rule \""+e.startRule+'".');n=t[e.startRule]}function ce(e,r){return{type:"literal",text:e,ignoreCase:r}}function fe(e,r,t){return{type:"class",parts:e,inverted:r,ignoreCase:t}}function le(e){var r,t=ie[e];if(t)return t;for(r=e-1;!ie[r];)r--;for(t={line:(t=ie[r]).line,column:t.column};r<e;)10===u.charCodeAt(r)?(t.line++,t.column=1):t.column++,r++;return ie[e]=t}function he(e,r){var t=le(e),n=le(r);return{start:{offset:e,line:t.line,column:t.column},end:{offset:r,line:n.line,column:n.column}}}function pe(e){oe<ae||(ae<oe&&(ae=oe,ue=[]),ue.push(e))}function ve(){var e,r,t,n,o;for(e=oe,r=[],t=Ge();t!==l;)r.push(t),t=Ge();if(r!==l)if((t=function(){var e,r,t,n,o,i;if(e=oe,(r=de())!==l){for(t=[],n=oe,o=[],i=Ge();i!==l;)o.push(i),i=Ge();for(o!==l&&(i=de())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;){for(t.push(n),n=oe,o=[],i=Ge();i!==l;)o.push(i),i=Ge();o!==l&&(i=de())!==l?n=o=[o,i]:(oe=n,n=l)}t!==l?(r=a(r,t),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(t=null),t!==l){for(n=[],o=Ge();o!==l;)n.push(o),o=Ge();n!==l?e=r=i(t):(oe=e,e=l)}else oe=e,e=l;else oe=e,e=l;return e}function de(){var e,r,t,n,o,i;if(e=oe,(r=function(){var e,r,t,n,o,i,a;if(e=oe,s.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(c)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=ke())!==l?(o=oe,(i=Se())===l&&(i=null),i!==l&&(a=ge())!==l?o=i=[i,a]:(oe=o,o=l),o===l&&(o=null),o!==l?(r=f(r,n,o),e=r):(oe=e,e=l)):(oe=e,e=l)}else oe=e,e=l;return e}())!==l){for(t=[],n=oe,o=[],i=Ge();i!==l;)o.push(i),i=Ge();for(o!==l&&(i=ye())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;){for(t.push(n),n=oe,o=[],i=Ge();i!==l;)o.push(i),i=Ge();o!==l&&(i=ye())!==l?n=o=[o,i]:(oe=n,n=l)}t!==l?e=r=a(r,t):(oe=e,e=l)}else oe=e,e=l;return e}function ye(){var e,r;return o.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(h)),r!==l&&(r=p()),(e=r)===l&&(e=function(){var e,r,t,n;if(e=oe,v.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(d)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=ge())!==l?(r=y(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(e=function(){var e,r,t,n;if(e=oe,g.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(m)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=me())!==l?(r=x(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(e=function(){var e,r,t,n;if(e=oe,b.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(w)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=me())!==l?(r=j(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(e=function(){var e,r,t,n;if(e=oe,k.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(q)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=function(){var e,r,t,n,o,i;if(e=oe,(r=xe())!==l){for(t=[],n=oe,(o=Se())===l&&(o=null),o!==l&&(i=xe())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;)t.push(n),n=oe,(o=Se())===l&&(o=null),o!==l&&(i=xe())!==l?n=o=[o,i]:(oe=n,n=l);t!==l?(r=a(r,t),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())!==l?(r=y(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(e=function(){var e,r,t,n;if(e=oe,O.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(S)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=function(){var e,r,t,n,o,i;if(e=oe,(r=be())!==l){for(t=[],n=oe,(o=Se())===l&&(o=null),o!==l&&(i=be())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;)t.push(n),n=oe,(o=Se())===l&&(o=null),o!==l&&(i=be())!==l?n=o=[o,i]:(oe=n,n=l);t!==l?(r=a(r,t),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())!==l?(r=y(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(e=function(){var e,r,t,n;if(e=oe,E.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(R)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=function(){var e,r,t,n,o,i;if(e=oe,(r=we())!==l){for(t=[],n=oe,(o=Se())===l&&(o=null),o!==l&&(i=we())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;)t.push(n),n=oe,(o=Se())===l&&(o=null),o!==l&&(i=we())!==l?n=o=[o,i]:(oe=n,n=l);t!==l?(r=a(r,t),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())!==l?(r=y(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(e=function(){var e,r,t,n;if(e=oe,_.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(G)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=function(){var e,r,t,n,o,i;if(e=oe,(r=ke())!==l){for(t=[],n=oe,(o=Se())===l&&(o=null),o!==l&&(i=ke())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;)t.push(n),n=oe,(o=Se())===l&&(o=null),o!==l&&(i=ke())!==l?n=o=[o,i]:(oe=n,n=l);t!==l?(r=a(r,t),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())!==l?(r=y(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())===l&&(e=function(){var e,r,t,n;if(e=oe,M.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(P)),r!==l){for(t=[],n=Ge();n!==l;)t.push(n),n=Ge();t!==l&&(n=function(){var e,r,t,n,o,i;if(e=oe,(r=je())!==l){for(t=[],n=oe,(o=Se())===l&&(o=null),o!==l&&(i=je())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;)t.push(n),n=oe,(o=Se())===l&&(o=null),o!==l&&(i=je())!==l?n=o=[o,i]:(oe=n,n=l);t!==l?(r=a(r,t),e=r):(oe=e,e=l)}else oe=e,e=l;return e}())!==l?(r=y(r,n),e=r):(oe=e,e=l)}else oe=e,e=l;return e}()),e}function ge(){var e,r,t,n,o,i;if(e=oe,(r=ke())!==l){for(t=[],n=oe,(o=Se())===l&&(o=null),o!==l&&(i=ke())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;)t.push(n),n=oe,(o=Se())===l&&(o=null),o!==l&&(i=ke())!==l?n=o=[o,i]:(oe=n,n=l);t!==l?e=r=a(r,t):(oe=e,e=l)}else oe=e,e=l;return e}function me(){var e,r,t,n,o,i;if(e=oe,(r=Ae())!==l){for(t=[],n=oe,(o=Se())===l&&(o=null),o!==l&&(i=Ae())!==l?n=o=[o,i]:(oe=n,n=l);n!==l;)t.push(n),n=oe,(o=Se())===l&&(o=null),o!==l&&(i=Ae())!==l?n=o=[o,i]:(oe=n,n=l);t!==l?e=r=a(r,t):(oe=e,e=l)}else oe=e,e=l;return e}function xe(){var e,r,t,n,o,i;return e=oe,(r=ke())!==l?((t=Se())===l&&(t=null),t!==l&&(n=ke())!==l?((o=Se())===l&&(o=null),o!==l&&(i=ke())!==l?e=r=A(r,n,i):(oe=e,e=l)):(oe=e,e=l)):(oe=e,e=l),e}function be(){var e,r,t,n;return e=oe,(r=ke())!==l?((t=Se())===l&&(t=null),t!==l&&(n=ke())!==l?e=r=C(r,n):(oe=e,e=l)):(oe=e,e=l),e}function we(){var e,r,t,n;return e=oe,(r=ke())!==l?((t=Se())===l&&(t=null),t!==l&&(n=ke())!==l?e=r=T(r,n):(oe=e,e=l)):(oe=e,e=l),e}function je(){var e,r,t,n,o,i,a,u,s,c,f;return e=oe,(r=qe())!==l?((t=Se())===l&&(t=null),t!==l&&(n=qe())!==l?((o=Se())===l&&(o=null),o!==l&&(i=Ae())!==l&&Se()!==l&&(a=Oe())!==l?((u=Se())===l&&(u=null),u!==l&&(s=Oe())!==l?((c=Se())===l&&(c=null),c!==l&&(f=ke())!==l?e=r=z(r,n,i,a,s,f):(oe=e,e=l)):(oe=e,e=l)):(oe=e,e=l)):(oe=e,e=l)):(oe=e,e=l),e}function ke(){var e,r,t,n;return e=oe,(r=Ae())!==l?((t=Se())===l&&(t=null),t!==l&&(n=Ae())!==l?e=r=N(r,n):(oe=e,e=l)):(oe=e,e=l),e}function qe(){var e;return(e=Ee())===l&&(e=_e()),e!==l&&(e=B(e)),e}function Ae(){var e,r,t;return e=oe,(r=Te())===l&&(r=null),r!==l&&(t=Ee())!==l?e=r=[r,t]:(oe=e,e=l),e===l&&(e=oe,(r=Te())===l&&(r=null),r!==l&&(t=_e())!==l?e=r=[r,t]:(oe=e,e=l)),e!==l&&(e=Z(e)),e}function Oe(){var e;return I.test(u.charAt(oe))?(e=u.charAt(oe),oe++):(e=l,0===se&&pe(U)),e!==l&&(e=F(e)),e}function Se(){var e,r,t,n,o;if(e=oe,r=[],(t=Ge())!==l)for(;t!==l;)r.push(t),t=Ge();else r=l;if(r!==l)if((t=Ce())===l&&(t=null),t!==l){for(n=[],o=Ge();o!==l;)n.push(o),o=Ge();n!==l?e=r=[r,t,n]:(oe=e,e=l)}else oe=e,e=l;else oe=e,e=l;if(e===l){if(r=e=oe,(t=Ce())!==l){for(n=[],o=Ge();o!==l;)n.push(o),o=Ge();n!==l?r=t=[t,n]:(oe=r,r=l)}else oe=r,r=l;r!==l&&(r=J()),e=r}return e}function Ce(){var e;return 44===u.charCodeAt(oe)?(e=L,oe++):(e=l,0===se&&pe(D)),e}function Ee(){var e,r,t,n,o,i,a;return n=e=oe,(o=_e())===l&&(o=null),o!==l?(46===u.charCodeAt(oe)?(i=V,oe++):(i=l,0===se&&pe(Q)),i!==l&&(a=_e())!==l?n=o=[o,i,a]:(oe=n,n=l)):(oe=n,n=l),n===l&&(n=oe,(o=_e())!==l?(46===u.charCodeAt(oe)?(i=V,oe++):(i=l,0===se&&pe(Q)),i!==l?n=o=[o,i]:(oe=n,n=l)):(oe=n,n=l)),n!==l&&(n=H(n)),(r=n)!==l?((t=Re())===l&&(t=null),t!==l?e=r=[r,t]:(oe=e,e=l)):(oe=e,e=l),e===l&&(e=oe,(r=_e())!==l&&(t=Re())!==l?e=r=[r,t]:(oe=e,e=l)),e!==l&&(e=H(e)),e}function Re(){var e,r,t,n;return e=oe,W.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(Y)),r!==l?((t=Te())===l&&(t=null),t!==l&&(n=_e())!==l?e=r=[r,t,n]:(oe=e,e=l)):(oe=e,e=l),e!==l&&(e=H(e)),e}function Te(){var e;return $.test(u.charAt(oe))?(e=u.charAt(oe),oe++):(e=l,0===se&&pe(X)),e}function _e(){var e,r;if(e=[],K.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(ee)),r!==l)for(;r!==l;)e.push(r),K.test(u.charAt(oe))?(r=u.charAt(oe),oe++):(r=l,0===se&&pe(ee));else e=l;return e!==l&&(e=re(e)),e}function Ge(){var e;return te.test(u.charAt(oe))?(e=u.charAt(oe),oe++):(e=l,0===se&&pe(ne)),e!==l&&(e=J()),e}var Me,Pe,ze,Ne={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Be in Ne)Ne[Be.toUpperCase()]=Ne[Be];function Ze(e,r){r||(r=[{}]);for(var t=r.length;t--;){var n={code:e,command:Ne[e]};for(var o in e==e.toLowerCase()&&(n.relative=!0),r[t])n[o]=r[t][o];r[t]=n}return r}if((r=n())!==l&&oe===u.length)return r;throw r!==l&&oe<u.length&&pe({type:"end"}),Me=ue,Pe=ae<u.length?u.charAt(ae):null,ze=ae<u.length?he(ae,ae+1):he(ae,ae),new Xe(Xe.buildMessage(Me,Pe),Me,Pe,ze)}},er=Ke.parse,rr=Object.freeze({default:Ke,__moduleExports:Ke,parse:er}),tr=(rr&&Ke||rr).parse;(tr.parseSVG=tr).makeAbsolute=function(e){var t,n={x:0,y:0},o={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return e.forEach(function(e){for(var r in"moveto"===e.command&&(t=e),e.x0=n.x,e.y0=n.y,o)r in e&&(e[r]+=e.relative?e[o[r]]:0);"x"in e||(e.x=n.x),"y"in e||(e.y=n.y),e.relative=!1,e.code=e.code.toUpperCase(),"closepath"==e.command&&(e.x=t.x,e.y=t.y),n=e}),e};var nr=tr;function or(e){this.message=e}function ir(e,r){return e.x*r.y-e.y*r.x}function ar(e,r,t){if(e.x<t.x&&t.x<=r.x||r.x<t.x&&t.x<=e.x){var n=e.y;if(e.x!==r.x&&(n=e.y+(r.y-e.y)*(t.x-e.x)/(r.x-e.x)),t.y>n)return 1}return 0}Object.setPrototypeOf(or,Error),(or.prototype=Object.create(Error.prototype)).name="ImplementationError",or.prototype.message="",or.prototype.constructor=or;var ur={winding:function(e){if(!(e.length<3)){var r=e[0],t=ir(e[e.length-1].v2,r.v1);return(t=e.reduce(function(e,r){return e+ir(r.v1,r.v2)},t))<0?"ccw":0<t?"cw":void 0}},contains:function(e,t){if(e.length<3)return!1;var r=e[0],n=ar(e[e.length-1].v2,r.v1,t);return(n=e.reduce(function(e,r){return e+ar(r.v1,r.v2,t)},n))%2==1},parse:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=0,o=0,i=0,a=0,u=0,s=0,c=void 0,r=nr(e).reduce(function(e,r){switch(r.code){case"M":case"m":!0===r.relative?(u+=r.x,s+=r.y):(u=r.x,s=r.y),c&&0===c.curves.length&&e.pop(),c=new p.Path,e.push(c),t?c.moveTo(u,-s):c.moveTo(u,s);break;case"L":case"l":!0===r.relative?(u+=r.x,s+=r.y):(u=r.x,s=r.y),t?c.lineTo(u,-s):c.lineTo(u,s);break;case"V":case"v":!0===r.relative?s+=r.y:s=r.y,t?c.lineTo(u,-s):c.lineTo(u,s);break;case"H":case"h":!0===r.relative?u+=r.x:u=r.x,t?c.lineTo(u,-s):c.lineTo(u,s);break;case"C":case"c":!0===r.relative?(n=u+r.x1,o=s+r.y1,i=u+r.x2,a=s+r.y2,u+=r.x,s+=r.y):(n=r.x1,o=r.y1,i=r.x2,a=r.y2,u=r.x,s=r.y),t?c.bezierCurveTo(n,-o,i,-a,u,-s):c.bezierCurveTo(n,o,i,a,u,s);break;case"S":case"s":n=u+(u-i),o=s+(s-a),!0===r.relative?(i=u+r.x2,a=s+r.y2,u+=r.x,s+=r.y):(i=r.x2,a=r.y2,u=r.x,s=r.y),t?c.bezierCurveTo(n,-o,i,-a,u,-s):c.bezierCurveTo(n,o,i,a,u,s);break;case"Q":case"q":!0===r.relative?(n=u+r.x1,o=s+r.y1,u+=r.x,s+=r.y):(n=r.x1,o=r.y1,u=r.x,s=r.y),t?c.quadraticCurveTo(n,-o,u,-s):c.quadraticCurveTo(n,o,u,s);break;case"T":case"t":n=u+(u-n),o=s+(s-o),!0===r.relative?(u+=r.x,s+=r.y):(u=r.x,s=r.y),t?c.quadraticCurveTo(n,-o,u,-s):c.quadraticCurveTo(n,o,u,s);break;case"A":case"a":throw new or;case"Z":c.closePath();break;default:throw new Error('Unknown code "'+r.code+'"')}return e},[]);return 0===r.length?null:1===r.length?r[0]:r.reduce(function(e,r){return e.add(r),e},new p.Shape)}},sr=Object.assign({},r,t),cr=O.optional("topojson");function fr(e){return e+"Code"}function lr(e,r,t){var n=fr(e);return t.properties[n]===r}function hr(e,r){var t=e.reduce(function(e,r){return e.concat(r.x,r.y)},[]),n=e.length,o=[];r.forEach(function(e,r){o.push(n),n+=e.length,t=t.concat(e.reduce(function(e,r){return e.concat(r.x,r.y)},[]))});for(var i=ye(t,o,2),a=[],u=0;u<i.length;u+=3)a.push(i.slice(u,u+3));return a}function pr(e,u){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return e.coordinates.reduce(function(e,r,t){var n=u.path({type:"Polygon",coordinates:r});if(!n)return s.push(t),e;var o=ur.parse(n,!0),i=void 0;i=o instanceof p.Shape?o.curves:[o];var a=new p.Shape;return i.forEach(function(e){var r=ur.winding(e.curves);"ccw"===r?a.add(e):"cw"===r&&a.holes.push(e)}),0===a.holes.length?e.concat(a.curves.map(function(e){var r=new p.Shape;return r.add(e),r})):e.concat(a)},[])}function vr(e){var n=new Float32Array(6*e.length);e.forEach(function(e,r){var t=6*r;n[t+0]=e.v1.x,n[t+1]=e.v1.y,n[t+3]=e.v2.x,n[t+4]=e.v2.y});var r=new p.BufferGeometry,t=new p.BufferAttribute(n,3);return r.addAttribute("position",t),r}var dr=a("GeographyBuilder"),yr=function(){function r(e){d(this,r),dr(this).levels=[].concat(b(e))}var t;return y(r,[{key:"init",value:(t=v(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=dr(this),"string"!=typeof r){e.next=7;break}return e.next=4,ae.json(r,{local:!0});case 4:t.data=e.sent,e.next=10;break;case 7:return e.next=9,Promise.resolve(r);case 9:t.data=e.sent;case 10:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"property",value:function(e,r){var t=r.level,n=r.code,o=r.projection,i=this.data.objects.geography.geometries;t&&(i=i.filter(function(e){return lr(t,n,e)}));var a=cr.merge(this.data,i);return o?o.path[e](a):sr["geo"+e.charAt().toUpperCase()+e.slice(1)](a)}},{key:"bounds",value:function(e){return this.property("bounds",e)}},{key:"area",value:function(e){return this.property("area",e)}},{key:"centroid",value:function(e){return this.property("centroid",e)}},{key:"poleOfInaccessibility",value:function(e){var r=e.level,t=e.code,n=e.projection,o=e.precision,i=void 0===o?.01:o,a=this.data.objects.geography.geometries;if(r&&(a=a.filter(function(e){return lr(r,t,e)})),a=cr.merge(this.data,a),n){var u=$e.max(a.coordinates,function(e){return n.path.area({type:"Polygon",coordinates:e})});if(!u)return console.warn("Unable to derive pole of inaccessibility:",r,t),null;var s=n.path({type:"Polygon",coordinates:u});if(!s)return console.warn("Unable to derive pole of inaccessibility:",r,t),null;var c=ur.parse(s,!0);if(!c)return console.warn("Unable to derive pole of inaccessibility:",r,t),null;var f=(c instanceof p.Shape?c.curves:[c]).map(function(e){return e.curves.map(function(e){return[e.v1.x,e.v1.y]})});return De(f,Math.sqrt(n.path.area({type:"Polygon",coordinates:u}))*i)}var l=$e.max(a.coordinates,function(e){return sr.geoArea({type:"Polygon",coordinates:e})});return l?De(l,Math.sqrt(sr.geoArea({type:"Polygon",coordinates:l}))*i):(console.warn("Unable to derive pole of inaccessibility:",r,t),null)}},{key:"shapes",value:function(e){var r=e.geometries,t=e.projection,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return pr(cr.merge(this.data,r),t,n)}},{key:"shapeGeometry",value:function(e){var r=e.geometries,t=e.projection,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return function(e){var r=p.ShapeUtils.triangulateShape;p.ShapeUtils.triangulateShape=hr;var t=(new p.BufferGeometry).fromGeometry(e.reduce(function(e,r){return e.merge(new p.ShapeGeometry(r)),e},new p.Geometry));return p.ShapeUtils.triangulateShape=r,t.computeBoundingSphere(),t}(pr(cr.merge(this.data,r),t,n))}},{key:"outlineGeometry",value:function(e){var r=e.geometries,t=e.projection,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o=pr(cr.merge(this.data,r),t,n);return vr(o.reduce(function(e,r){return e.concat(r.curves.reduce(function(e,r){return e.concat(r.curves)},[]),r.holes.reduce(function(e,r){return e.concat(r.curves)},[]))},[]))}},{key:"borderGeometry",value:function(e){var r=e.object,t=e.filter,n=e.projection,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=cr.mesh(this.data,r,t),a=n.path(i);if(!a)return o.push(0),vr([]);var u=ur.parse(a,!0);return vr(u instanceof p.Shape?u.curves.reduce(function(e,r){return e.concat(r.curves)},[]):u.curves)}},{key:"geographyShapes",value:function(e){var r=e.projection,t=this.data.objects.geography.geometries,n=[],o=this.shapes({projection:r,geometries:t},n);return 0!==n.length&&console.warn("Unable to project "+n.length+" polygons"),o}},{key:"geographyShapeGeometry",value:function(e){var r=e.projection,t=this.data.objects.geography.geometries,n=[],o=this.shapeGeometry({projection:r,geometries:t},n);return 0!==n.length&&console.warn("Unable to project "+n.length+" polygons"),o}},{key:"geographyOutlineGeometry",value:function(e){var r=e.projection,t=this.data.objects.geography.geometries,n=[],o=this.outlineGeometry({projection:r,geometries:t},n);return 0!==n.length&&console.warn("Unable to project "+n.length+" polygons"),o}},{key:"geographySubdivisionGeometry",value:function(e){var r=e.projection,t=fr(this.levels[0]),n=[],o=this.borderGeometry({projection:r,object:this.data.objects.geography,filter:function(e,r){return e.properties[t]!==r.properties[t]}},n);return 0!==n.length?new p.BufferGeometry:o}},{key:"divisionShapes",value:function(e){var r=e.level,t=e.code,n=e.projection,o=this.data.objects.geography.geometries,i=[],a=this.shapes({projection:n,geometries:o.filter(function(e){return lr(r,t,e)})},i);return 0!==i.length&&console.warn(i.length+" polygons failed to project"),a}},{key:"divisionShapeGeometry",value:function(e){var r=e.level,t=e.code,n=e.projection,o=this.data.objects.geography.geometries,i=[],a=this.shapeGeometry({projection:n,geometries:o.filter(function(e){return lr(r,t,e)})},i);return 0!==i.length&&console.warn("Unable to project "+i.length+" polygons:",r,t),a}},{key:"divisionOutlineGeometry",value:function(e){var r=e.level,t=e.code,n=e.projection,o=this.data.objects.geography.geometries,i=[],a=this.outlineGeometry({projection:n,geometries:o.filter(function(e){return lr(r,t,e)})},i);return 0!==i.length&&console.warn("Unable to project "+i.length+" polygons:",r,t),a}},{key:"divisionBorderGeometry",value:function(e){var r=this,t=e.level,n=e.code,o=e.projection,i=function(){var e=r.levels.indexOf(t);if(-1===e)throw new Error('Could not find level "'+t+'" in geography');if(0<e)return r.levels[e-1]}(),a=this.data.objects.geography.geometries;i&&(a=a.filter(function(e){return lr(i,n,e)}));var u=a.filter(function(e){return lr(t,n,e)}).map(function(e){return a.indexOf(e)}),s=cr.neighbors(a),c={type:"GeometryCollection",geometries:a.filter(function(e,r){return u.includes(r)||u.some(function(e){return s[e].includes(r)})})},f=fr(t),l=[],h=this.borderGeometry({projection:o,object:c,filter:function(e,r){return e.properties[f]===n?e.properties[f]<r.properties[f]:e.properties[f]>r.properties[f]}},l);return 0!==l.length?new p.BufferGeometry:h}},{key:"divisionSubdivisionGeometry",value:function(e){var r=e.level,t=e.code,n=e.projection,o={type:"GeometryCollection",geometries:this.data.objects.geography.geometries.filter(function(e){return lr(r,t,e)})},i=[],a=this.borderGeometry({projection:n,object:o,filter:function(e,r){return e!==r}},i);return 0!==i.length?new p.BufferGeometry:a}},{key:"levels",get:function(){var e=dr(this);return[].concat(b(e.levels))}},{key:"data",get:function(){return dr(this).data}}]),r}(),gr=function(e){function r(){return d(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"japan",[new pe("prefecture"),new pe("municipality",{coerce:function(e){return parseInt(e,10)},super:function(e){return parseInt((""+e).slice(0,-3),10)}})]))}return o(r,de),r}();function mr(e,r){return{quotient:Math.floor(e/r),remainder:e%r}}function xr(e){var r=Math.floor(e);return{integral:r,fractional:e-r}}var br={primary:function(e){var r=mr(60*e[1],40);return 100*r.quotient+1*(r=xr(e[0]-100)).integral},secondary:function(e){var r=mr(60*e[1],40),t=r.quotient,n=(r=mr(r.remainder,5)).quotient;return 1e4*t+100*(r=xr(e[0]-100)).integral+10*n+1*(r=mr(60*r.fractional,7.5)).quotient},basic:function(e){var r=mr(60*e[1],40),t=r.quotient,n=(r=mr(r.remainder,5)).quotient,o=(r=mr(60*r.remainder,30)).quotient;return 1e6*t+1e4*(r=xr(e[0]-100)).integral+1e3*n+100*(r=mr(60*r.fractional,7.5)).quotient+10*o+1*(r=mr(60*r.remainder,45)).quotient},half:function(e){var r=mr(60*e[1],40),t=r.quotient,n=(r=mr(r.remainder,5)).quotient,o=(r=mr(60*r.remainder,30)).quotient,i=(r=mr(r.remainder,15)).quotient;return 1e7*t+1e5*(r=xr(e[0]-100)).integral+1e4*n+1e3*(r=mr(60*r.fractional,7.5)).quotient+100*o+10*(r=mr(60*r.remainder,45)).quotient+1*(2*i+(r=mr(r.remainder,22.5)).quotient+1)},quarter:function(e){var r=mr(60*e[1],40),t=r.quotient,n=(r=mr(r.remainder,5)).quotient,o=(r=mr(60*r.remainder,30)).quotient,i=(r=mr(r.remainder,15)).quotient,a=(r=mr(r.remainder,7.5)).quotient;return 1e8*t+1e6*(r=xr(e[0]-100)).integral+1e5*n+1e4*(r=mr(60*r.fractional,7.5)).quotient+1e3*o+100*(r=mr(60*r.remainder,45)).quotient+10*(2*i+(r=mr(r.remainder,22.5)).quotient+1)+1*(2*a+(r=mr(r.remainder,11.25)).quotient+1)},eighth:function(e){var r=mr(60*e[1],40),t=r.quotient,n=(r=mr(r.remainder,5)).quotient,o=(r=mr(60*r.remainder,30)).quotient,i=(r=mr(r.remainder,15)).quotient,a=(r=mr(r.remainder,7.5)).quotient,u=(r=mr(r.remainder,3.75)).quotient;return 1e9*t+1e7*(r=xr(e[0]-100)).integral+1e6*n+1e5*(r=mr(60*r.fractional,7.5)).quotient+1e4*o+1e3*(r=mr(60*r.remainder,45)).quotient+100*(2*i+(r=mr(r.remainder,22.5)).quotient+1)+10*(2*a+(r=mr(r.remainder,11.25)).quotient+1)+1*(2*u+(r=mr(r.remainder,5.625)).quotient+1)}},wr={primary:function(e){var r=mr(e,100),t=r.quotient;return[3600*((r=mr(r.remainder,1)).quotient+100)/3600,2400*t/3600]},secondary:function(e){var r=mr(e,1e4),t=r.quotient,n=(r=mr(r.remainder,100)).quotient,o=(r=mr(r.remainder,10)).quotient;return[(3600*(n+100)+450*(r=mr(r.remainder,1)).quotient)/3600,(2400*t+300*o)/3600]},basic:function(e){var r=mr(e,1e6),t=r.quotient,n=(r=mr(r.remainder,1e4)).quotient,o=(r=mr(r.remainder,1e3)).quotient,i=(r=mr(r.remainder,100)).quotient,a=(r=mr(r.remainder,10)).quotient;return[(3600*(n+100)+450*i+45*(r=mr(r.remainder,1)).quotient)/3600,(2400*t+300*o+30*a)/3600]},half:function(e){var r=mr(e,1e7),t=r.quotient,n=(r=mr(r.remainder,1e5)).quotient,o=(r=mr(r.remainder,1e4)).quotient,i=(r=mr(r.remainder,1e3)).quotient,a=(r=mr(r.remainder,100)).quotient,u=(r=mr(r.remainder,10)).quotient,s=(r=mr(r.remainder,1)).quotient;return[(3600*(n+100)+450*i+45*u+22.5*(s-1&1))/3600,(2400*t+300*o+30*a+15*(s-1>>1))/3600]},quarter:function(e){var r=mr(e,1e8),t=r.quotient,n=(r=mr(r.remainder,1e6)).quotient,o=(r=mr(r.remainder,1e5)).quotient,i=(r=mr(r.remainder,1e4)).quotient,a=(r=mr(r.remainder,1e3)).quotient,u=(r=mr(r.remainder,100)).quotient,s=(r=mr(r.remainder,10)).quotient,c=(r=mr(r.remainder,1)).quotient;return[(3600*(n+100)+450*i+45*u+22.5*(s-1&1)+11.25*(c-1&1))/3600,(2400*t+300*o+30*a+15*(s-1>>1)+7.5*(c-1>>1))/3600]},eighth:function(e){var r=mr(e,1e9),t=r.quotient,n=(r=mr(r.remainder,1e7)).quotient,o=(r=mr(r.remainder,1e6)).quotient,i=(r=mr(r.remainder,1e5)).quotient,a=(r=mr(r.remainder,1e4)).quotient,u=(r=mr(r.remainder,1e3)).quotient,s=(r=mr(r.remainder,100)).quotient,c=(r=mr(r.remainder,10)).quotient,f=(r=mr(r.remainder,1)).quotient;return[(3600*(n+100)+450*i+45*u+22.5*(s-1&1)+11.25*(c-1&1)+5.625*(f-1&1))/3600,(2400*t+300*o+30*a+15*(s-1>>1)+7.5*(c-1>>1)+3.75*(f-1>>1))/3600]}},jr=a("JapanRegionalMesh"),kr=function(){function n(e,r){d(this,n);var t=jr(this);t.name=e,t.size=[].concat(b(r))}return y(n,[{key:"code",value:function(e){return br[this.name](e)}},{key:"origin",value:function(e){return wr[this.name](e)}},{key:"center",value:function(e){var r=this.origin(e),t=this.size;return[r[0]+t[0]/2,r[1]+t[1]/2]}},{key:"name",get:function(){return jr(this).name}},{key:"size",get:function(){var e=jr(this);return[].concat(b(e.size))}}]),n}(),qr={primary:new kr("primary",[1,2400/3600]),secondary:new kr("secondary",[.125,300/3600]),basic:new kr("basic",[.0125,30/3600]),half:new kr("half",[.00625,15/3600]),quarter:new kr("quarter",[.003125,7.5/3600]),eighth:new kr("eighth",[.0015625,3.75/3600])},Ar=c(function(e,r){!function(){var b=Math.PI,l=Math.sin,h=Math.cos,p=Math.tan,n=Math.asin,v=Math.atan2,c=Math.acos,j=b/180,t=864e5,r=2440588,o=2451545;function w(e){return new Date((e+.5-r)*t)}function k(e){return e.valueOf()/t-.5+r-o}var i=23.4397*j;function a(e,r){return v(l(e)*h(i)-p(r)*l(i),h(e))}function q(e,r){return n(l(r)*h(i)+h(r)*l(i)*l(e))}function d(e,r,t){return v(l(e),h(e)*l(r)-p(t)*h(r))}function y(e,r,t){return n(l(r)*l(t)+h(r)*h(t)*h(e))}function g(e,r){return j*(280.16+360.9856235*e)-r}function A(e){return j*(357.5291+.98560028*e)}function O(e){return e+j*(1.9148*l(e)+.02*l(2*e)+3e-4*l(3*e))+102.9372*j+b}function s(e){var r=O(A(e));return{dec:q(r,0),ra:a(r,0)}}var S={getPosition:function(e,r,t){var n=j*-t,o=j*r,i=k(e),a=s(i),u=g(i,n)-a.ra;return{azimuth:d(u,o,a.dec),altitude:y(u,o,a.dec)}}},C=S.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];S.addTime=function(e,r,t){C.push([e,r,t])};var E=9e-4;function R(e,r,t){return E+(e+r)/(2*b)+t}function T(e,r,t){return o+e+.0053*l(r)-.0069*l(2*t)}function _(e,r,t,n,o,i,a){var u,s;return T(R((u=t,s=n,c((l(e)-l(u)*l(s))/(h(u)*h(s)))),r,o),i,a)}function m(e){var r=j*(134.963+13.064993*e),t=j*(93.272+13.22935*e),n=j*(218.316+13.176396*e)+6.289*j*l(r),o=5.128*j*l(t),i=385001-20905*h(r);return{ra:a(n,o),dec:q(n,o),dist:i}}function G(e,r){return new Date(e.valueOf()+r*t/24)}S.getTimes=function(e,r,t){var n,o,i,a,u,s,c,f=j*-t,l=j*r,h=k(e),p=(s=h,c=f,Math.round(s-E-c/(2*b))),v=R(0,f,p),d=A(v),y=O(d),g=q(y,0),m=T(v,d,y),x={solarNoon:w(m),nadir:w(m-.5)};for(n=0,o=C.length;n<o;n+=1)u=m-((a=_((i=C[n])[0]*j,f,l,g,p,d,y))-m),x[i[1]]=w(u),x[i[2]]=w(a);return x},S.getMoonPosition=function(e,r,t){var n,o=j*-t,i=j*r,a=k(e),u=m(a),s=g(a,o)-u.ra,c=y(s,i,u.dec),f=v(l(s),p(i)*h(u.dec)-l(u.dec)*h(s));return c+=((n=c)<0&&(n=0),2967e-7/Math.tan(n+.00312536/(n+.08901179))),{azimuth:d(s,i,u.dec),altitude:c,distance:u.dist,parallacticAngle:f}},S.getMoonIllumination=function(e){var r=k(e||new Date),t=s(r),n=m(r),o=c(l(t.dec)*l(n.dec)+h(t.dec)*h(n.dec)*h(t.ra-n.ra)),i=v(149598e3*l(o),n.dist-149598e3*h(o)),a=v(h(t.dec)*l(t.ra-n.ra),l(t.dec)*h(n.dec)-h(t.dec)*l(n.dec)*h(t.ra-n.ra));return{fraction:(1+h(i))/2,phase:.5+.5*i*(a<0?-1:1)/Math.PI,angle:a}},S.getMoonTimes=function(e,r,t,n){var o=new Date(e);n?o.setUTCHours(0,0,0,0):o.setHours(0,0,0,0);for(var i,a,u,s,c,f,l,h,p,v,d,y,g,m=.133*j,x=S.getMoonPosition(o,r,t).altitude-m,b=1;b<=24&&(i=S.getMoonPosition(G(o,b),r,t).altitude-m,h=((c=(x+(a=S.getMoonPosition(G(o,b+1),r,t).altitude-m))/2-i)*(l=-(f=(a-x)/2)/(2*c))+f)*l+i,(v=0)<=(p=f*f-4*c*i)&&(d=l-(g=Math.sqrt(p)/(2*Math.abs(c))),y=l+g,Math.abs(d)<=1&&v++,Math.abs(y)<=1&&v++,d<-1&&(d=y)),1===v?x<0?u=b+d:s=b+d:2===v&&(u=b+(h<0?y:d),s=b+(h<0?d:y)),!u||!s);b+=2)x=a;var w={};return u&&(w.rise=G(o,u)),s&&(w.set=G(o,s)),u||s||(w[0<h?"alwaysUp":"alwaysDown"]=!0),w},e.exports=S}()}),Or=c(function(e){var i,t;i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,r){return e<<r|e>>>32-r},rotr:function(e,r){return e<<32-r|e>>>r},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var r=0;r<e.length;r++)e[r]=t.endian(e[r]);return e},randomBytes:function(e){for(var r=[];0<e;e--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(e){for(var r=[],t=0,n=0;t<e.length;t++,n+=8)r[n>>>5]|=e[t]<<24-n%32;return r},wordsToBytes:function(e){for(var r=[],t=0;t<32*e.length;t+=8)r.push(e[t>>>5]>>>24-t%32&255);return r},bytesToHex:function(e){for(var r=[],t=0;t<e.length;t++)r.push((e[t]>>>4).toString(16)),r.push((15&e[t]).toString(16));return r.join("")},hexToBytes:function(e){for(var r=[],t=0;t<e.length;t+=2)r.push(parseInt(e.substr(t,2),16));return r},bytesToBase64:function(e){for(var r=[],t=0;t<e.length;t+=3)for(var n=e[t]<<16|e[t+1]<<8|e[t+2],o=0;o<4;o++)8*t+6*o<=8*e.length?r.push(i.charAt(n>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],t=0,n=0;t<e.length;n=++t%4)0!=n&&r.push((i.indexOf(e.charAt(t-1))&Math.pow(2,-2*n+8)-1)<<2*n|i.indexOf(e.charAt(t))>>>6-2*n);return r}},e.exports=t}),Sr=Object.freeze({default:Or,__moduleExports:Or}),Cr={utf8:{stringToBytes:function(e){return Cr.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(Cr.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var r=[],t=0;t<e.length;t++)r.push(255&e.charCodeAt(t));return r},bytesToString:function(e){for(var r=[],t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return r.join("")}}},Er=Cr,Rr=Object.freeze({default:Er,__moduleExports:Er}),Tr=function(e){return null!=e&&(_r(e)||"function"==typeof(r=e).readFloatLE&&"function"==typeof r.slice&&_r(r.slice(0,0))||!!e._isBuffer);var r};function _r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var Gr,Mr,Pr,zr,Nr=Object.freeze({default:Tr,__moduleExports:Tr}),Br=Sr&&Or||Sr,Zr=Rr&&Er||Rr,Ir=Nr&&Tr||Nr,Ur=c(function(e){var m,x,b,w,n;m=Br,x=Zr.utf8,b=Ir,w=Zr.bin,(n=function e(r,t){r.constructor==String?r=t&&"binary"===t.encoding?w.stringToBytes(r):x.stringToBytes(r):b(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||(r=r.toString());for(var n=m.bytesToWords(r),o=8*r.length,i=1732584193,a=-271733879,u=-1732584194,s=271733878,c=0;c<n.length;c++)n[c]=16711935&(n[c]<<8|n[c]>>>24)|4278255360&(n[c]<<24|n[c]>>>8);n[o>>>5]|=128<<o%32,n[14+(o+64>>>9<<4)]=o;var f=e._ff,l=e._gg,h=e._hh,p=e._ii;for(c=0;c<n.length;c+=16){var v=i,d=a,y=u,g=s;a=p(a=p(a=p(a=p(a=h(a=h(a=h(a=h(a=l(a=l(a=l(a=l(a=f(a=f(a=f(a=f(a,u=f(u,s=f(s,i=f(i,a,u,s,n[c+0],7,-680876936),a,u,n[c+1],12,-389564586),i,a,n[c+2],17,606105819),s,i,n[c+3],22,-1044525330),u=f(u,s=f(s,i=f(i,a,u,s,n[c+4],7,-176418897),a,u,n[c+5],12,1200080426),i,a,n[c+6],17,-1473231341),s,i,n[c+7],22,-45705983),u=f(u,s=f(s,i=f(i,a,u,s,n[c+8],7,1770035416),a,u,n[c+9],12,-1958414417),i,a,n[c+10],17,-42063),s,i,n[c+11],22,-1990404162),u=f(u,s=f(s,i=f(i,a,u,s,n[c+12],7,1804603682),a,u,n[c+13],12,-40341101),i,a,n[c+14],17,-1502002290),s,i,n[c+15],22,1236535329),u=l(u,s=l(s,i=l(i,a,u,s,n[c+1],5,-165796510),a,u,n[c+6],9,-1069501632),i,a,n[c+11],14,643717713),s,i,n[c+0],20,-373897302),u=l(u,s=l(s,i=l(i,a,u,s,n[c+5],5,-701558691),a,u,n[c+10],9,38016083),i,a,n[c+15],14,-660478335),s,i,n[c+4],20,-405537848),u=l(u,s=l(s,i=l(i,a,u,s,n[c+9],5,568446438),a,u,n[c+14],9,-1019803690),i,a,n[c+3],14,-187363961),s,i,n[c+8],20,1163531501),u=l(u,s=l(s,i=l(i,a,u,s,n[c+13],5,-1444681467),a,u,n[c+2],9,-51403784),i,a,n[c+7],14,1735328473),s,i,n[c+12],20,-1926607734),u=h(u,s=h(s,i=h(i,a,u,s,n[c+5],4,-378558),a,u,n[c+8],11,-2022574463),i,a,n[c+11],16,1839030562),s,i,n[c+14],23,-35309556),u=h(u,s=h(s,i=h(i,a,u,s,n[c+1],4,-1530992060),a,u,n[c+4],11,1272893353),i,a,n[c+7],16,-155497632),s,i,n[c+10],23,-1094730640),u=h(u,s=h(s,i=h(i,a,u,s,n[c+13],4,681279174),a,u,n[c+0],11,-358537222),i,a,n[c+3],16,-722521979),s,i,n[c+6],23,76029189),u=h(u,s=h(s,i=h(i,a,u,s,n[c+9],4,-640364487),a,u,n[c+12],11,-421815835),i,a,n[c+15],16,530742520),s,i,n[c+2],23,-995338651),u=p(u,s=p(s,i=p(i,a,u,s,n[c+0],6,-198630844),a,u,n[c+7],10,1126891415),i,a,n[c+14],15,-1416354905),s,i,n[c+5],21,-57434055),u=p(u,s=p(s,i=p(i,a,u,s,n[c+12],6,1700485571),a,u,n[c+3],10,-1894986606),i,a,n[c+10],15,-1051523),s,i,n[c+1],21,-2054922799),u=p(u,s=p(s,i=p(i,a,u,s,n[c+8],6,1873313359),a,u,n[c+15],10,-30611744),i,a,n[c+6],15,-1560198380),s,i,n[c+13],21,1309151649),u=p(u,s=p(s,i=p(i,a,u,s,n[c+4],6,-145523070),a,u,n[c+11],10,-1120210379),i,a,n[c+2],15,718787259),s,i,n[c+9],21,-343485551),i=i+v>>>0,a=a+d>>>0,u=u+y>>>0,s=s+g>>>0}return m.endian([i,a,u,s])})._ff=function(e,r,t,n,o,i,a){var u=e+(r&t|~r&n)+(o>>>0)+a;return(u<<i|u>>>32-i)+r},n._gg=function(e,r,t,n,o,i,a){var u=e+(r&n|t&~n)+(o>>>0)+a;return(u<<i|u>>>32-i)+r},n._hh=function(e,r,t,n,o,i,a){var u=e+(r^t^n)+(o>>>0)+a;return(u<<i|u>>>32-i)+r},n._ii=function(e,r,t,n,o,i,a){var u=e+(t^(r|~n))+(o>>>0)+a;return(u<<i|u>>>32-i)+r},n._blocksize=16,n._digestsize=16,e.exports=function(e,r){if(null==e)throw new Error("Illegal argument "+e);var t=m.wordsToBytes(n(e,r));return r&&r.asBytes?t:r&&r.asString?w.bytesToString(t):m.bytesToHex(t)}}),Fr={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},Jr=function(e){throw{name:"SyntaxError",message:e,at:Gr,text:Pr}},Lr=function(e){return e&&e!==Mr&&Jr("Expected '"+e+"' instead of '"+Mr+"'"),Mr=Pr.charAt(Gr),Gr+=1,Mr},Dr=function(){var e,r="";for("-"===Mr&&Lr(r="-");"0"<=Mr&&Mr<="9";)r+=Mr,Lr();if("."===Mr)for(r+=".";Lr()&&"0"<=Mr&&Mr<="9";)r+=Mr;if("e"===Mr||"E"===Mr)for(r+=Mr,Lr(),"-"!==Mr&&"+"!==Mr||(r+=Mr,Lr());"0"<=Mr&&Mr<="9";)r+=Mr,Lr();if(e=+r,isFinite(e))return e;Jr("Bad number")},Hr=function(){var e,r,t,n="";if('"'===Mr)for(;Lr();){if('"'===Mr)return Lr(),n;if("\\"===Mr)if(Lr(),"u"===Mr){for(r=t=0;r<4&&(e=parseInt(Lr(),16),isFinite(e));r+=1)t=16*t+e;n+=String.fromCharCode(t)}else{if("string"!=typeof Fr[Mr])break;n+=Fr[Mr]}else n+=Mr}Jr("Bad string")},Vr=function(){for(;Mr&&Mr<=" ";)Lr()};zr=function(){switch(Vr(),Mr){case"{":return function(){var e,r={};if("{"===Mr){if(Lr("{"),Vr(),"}"===Mr)return Lr("}"),r;for(;Mr;){if(e=Hr(),Vr(),Lr(":"),Object.hasOwnProperty.call(r,e)&&Jr('Duplicate key "'+e+'"'),r[e]=zr(),Vr(),"}"===Mr)return Lr("}"),r;Lr(","),Vr()}}Jr("Bad object")}();case"[":return function(){var e=[];if("["===Mr){if(Lr("["),Vr(),"]"===Mr)return Lr("]"),e;for(;Mr;){if(e.push(zr()),Vr(),"]"===Mr)return Lr("]"),e;Lr(","),Vr()}}Jr("Bad array")}();case'"':return Hr();case"-":return Dr();default:return"0"<=Mr&&Mr<="9"?Dr():function(){switch(Mr){case"t":return Lr("t"),Lr("r"),Lr("u"),Lr("e"),!0;case"f":return Lr("f"),Lr("a"),Lr("l"),Lr("s"),Lr("e"),!1;case"n":return Lr("n"),Lr("u"),Lr("l"),Lr("l"),null}Jr("Unexpected '"+Mr+"'")}()}};var Qr,Wr,Yr,$r=function(e,a){var r;return Pr=e,Gr=0,Mr=" ",r=zr(),Vr(),Mr&&Jr("Syntax error"),"function"==typeof a?function e(r,t){var n,o,i=r[t];if(i&&"object"===(void 0===i?"undefined":m(i)))for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(o=e(i,n))?i[n]=o:delete i[n]);return a.call(r,t,i)}({"":r},""):r},Xr=Object.freeze({default:$r,__moduleExports:$r}),Kr=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,et={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function rt(e){return Kr.lastIndex=0,Kr.test(e)?'"'+e.replace(Kr,function(e){var r=et[e];return"string"==typeof r?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}var tt=function(e,r,t){var n;if(Wr=Qr="","number"==typeof t)for(n=0;n<t;n+=1)Wr+=" ";else"string"==typeof t&&(Wr=t);if((Yr=r)&&"function"!=typeof r&&("object"!==(void 0===r?"undefined":m(r))||"number"!=typeof r.length))throw new Error("JSON.stringify");return function e(r,t){var n,o,i,a,u,s=Qr,c=t[r];switch(c&&"object"===(void 0===c?"undefined":m(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(r)),"function"==typeof Yr&&(c=Yr.call(t,r,c)),void 0===c?"undefined":m(c)){case"string":return rt(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(Qr+=Wr,u=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,n=0;n<a;n+=1)u[n]=e(n,c)||"null";return i=0===u.length?"[]":Qr?"[\n"+Qr+u.join(",\n"+Qr)+"\n"+s+"]":"["+u.join(",")+"]",Qr=s,i}if(Yr&&"object"===(void 0===Yr?"undefined":m(Yr)))for(a=Yr.length,n=0;n<a;n+=1)"string"==typeof(o=Yr[n])&&(i=e(o,c))&&u.push(rt(o)+(Qr?": ":":")+i);else for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(i=e(o,c))&&u.push(rt(o)+(Qr?": ":":")+i);return i=0===u.length?"{}":Qr?"{\n"+Qr+u.join(",\n"+Qr)+"\n"+s+"}":"{"+u.join(",")+"}",Qr=s,i}}("",{"":e})},nt=Object.freeze({default:tt,__moduleExports:tt}),ot=Xr&&$r||Xr,it=nt&&tt||nt,at={parse:ot,stringify:it},ut=Object.freeze({default:at,__moduleExports:at,parse:ot,stringify:it}),st="undefined"!=typeof JSON?JSON:ut&&at||ut,ct=function(e,r){r||(r={}),"function"==typeof r&&(r={cmp:r});var p=r.space||"";"number"==typeof p&&(p=Array(p+1).join(" "));var i,v="boolean"==typeof r.cycles&&r.cycles,d=r.replacer||function(e,r){return r},y=r.cmp&&(i=r.cmp,function(o){return function(e,r){var t={key:e,value:o[e]},n={key:r,value:o[r]};return i(t,n)}}),g=[];return function e(r,t,n,o){var i=p?"\n"+new Array(o+1).join(p):"",a=p?": ":":";if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0!==(n=d.call(r,t,n))){if("object"!==(void 0===n?"undefined":m(n))||null===n)return st.stringify(n);if(ft(n)){for(var u=[],s=0;s<n.length;s++){var c=e(n,s,n[s],o+1)||st.stringify(null);u.push(i+p+c)}return"["+u.join(",")+i+"]"}if(-1!==g.indexOf(n)){if(v)return st.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}g.push(n);var f=lt(n).sort(y&&y(n));for(u=[],s=0;s<f.length;s++){var l=e(n,t=f[s],n[t],o+1);if(l){var h=st.stringify(t)+a+l;u.push(i+p+h)}}return g.splice(g.indexOf(n),1),"{"+u.join(",")+i+"}"}}({"":e},"",e,0)},ft=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},lt=Object.keys||function(e){var r=Object.prototype.hasOwnProperty||function(){return!0},t=[];for(var n in e)r.call(e,n)&&t.push(n);return t};var ht=Object.assign({},r,t,n),pt=a("Projection"),vt=function(){function f(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=e.name,t=void 0===r?"Equirectangular":r,n=e.scale,o=void 0===n?1e4:n,i=e.origin,a=void 0===i?[0,0]:i,u=e.rotates,s=void 0===u?[!0,!0]:u;d(this,f);var c=pt(this);c.name=t,c.scale=+o||1,Array.isArray(a)?c.origin=[+a[0]||0,+a[1]||0]:c.origin=[+a||0,+a||0],Array.isArray(s)?c.rotates=[!!s[0],!!s[1]]:c.rotates=[!!s,!!s],c.projector=this.projector}return y(f,[{key:"project",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=pt(this).projector(e);if(Number.isNaN(t[0])||Number.isNaN(t[1]))throw new Error("Could not project point ["+e+"]");return r&&(t[1]=-t[1]||0),t}},{key:"unproject",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=pt(this).projector.invert([e[0],r?-e[1]||0:e[1]]);if(Number.isNaN(t[0])||Number.isNaN(t[1]))throw new Error("Could not unproject point ["+e+"]");return t}},{key:"sun",value:function(e){var r=this.origin;return Ar.getPosition(e,r[1],r[0])}},{key:"moon",value:function(e){var r=this.origin;return Ar.getMoonPosition(e,r[1],r[0])}},{key:"equals",value:function(e){return this.name===e.name&&this.scale===e.scale&&this.origin[0]===e.origin[0]&&this.origin[1]===e.origin[1]&&this.rotates[0]===e.rotates[0]&&this.rotates[1]===e.rotates[1]}},{key:"toJSON",value:function(){return{name:this.name,scale:this.scale,origin:this.origin,rotates:this.rotates}}},{key:"projector",get:function(){var e=ht["geo"+this.name];if(void 0===e)throw new Error('Could not find projection for name "'+this.name+'"');var r=e();if("function"==typeof r.rotate){var t=[0,0,0];this.rotates[0]&&(t[0]=-this.origin[0]),this.rotates[1]&&(t[1]=-this.origin[1]),r.rotate(t)}r.translate([0,0]),r.scale(this.scale);var n=r(this.origin);return Array.isArray(n)&&r.translate([-n[0],-n[1]]),r}},{key:"path",get:function(){var e=pt(this);return ht.geoPath().projection(e.projector)}},{key:"name",get:function(){return pt(this).name}},{key:"scale",get:function(){return pt(this).scale}},{key:"origin",get:function(){var e=pt(this);return[].concat(b(e.origin))}},{key:"rotates",get:function(){var e=pt(this);return[].concat(b(e.rotates))}},{key:"hash",get:function(){var e,r=pt(this);return void 0===r.hash&&(r.hash=(e=this.toJSON(),Ur(ct(e)))),r.hash}}]),f}(),dt=function(e){function r(){return d(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"us",[new pe("state"),new pe("county",{coerce:function(e){return parseInt(e,10)},super:function(e){return parseInt((""+e).slice(0,-3),10)}})]))}return o(r,de),r}(),yt=function(e){function r(){return d(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"world",[new pe("country")]))}return o(r,de),r}();e.Division=s,e.DivisionLevel=pe,e.Geography=de,e.GeographyBuilder=yr,e.GeometryPack=le,e.JapanGeography=gr,e.JapanRegionalMesh=qr,e.Path=ur,e.Projection=vt,e.USGeography=dt,e.WorldGeography=yt,Object.defineProperty(e,"__esModule",{value:!0})});